(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{9552:function(e,s,t){Promise.resolve().then(t.bind(t,3789))},3789:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var a=t(7437),r=t(2265),l=t(6336),n=t(4041),i=t(3023),d=t(1908),c=t(8094),o=t(4861),m=t(9311),u=t(1827),f=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,f.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),h=(0,f.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),p=(0,f.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var j=t(1396),g=t.n(j);function N(){let[e,s]=(0,r.useState)([]),[t,f]=(0,r.useState)([]),[j,N]=(0,r.useState)(""),[b,y]=(0,r.useState)("all"),[v,w]=(0,r.useState)(1);(0,r.useEffect)(()=>{try{let e=JSON.parse(localStorage.getItem("tarotReadings")||"[]"),t=e.map(e=>({...e,date:new Date(e.date)}));s(t),f(t)}catch(e){console.error("Error loading readings:",e),s([]),f([])}},[]),(0,r.useEffect)(()=>{let s=[...e];if("all"!==b&&(s=s.filter(e=>e.spreadType===b)),j){let e=j.toLowerCase();s=s.filter(s=>s.question.toLowerCase().includes(e)||s.cards.some(s=>s.card.nameRu.toLowerCase().includes(e)||s.interpretation.toLowerCase().includes(e)))}s.sort((e,s)=>s.date.getTime()-e.date.getTime()),f(s),w(1)},[e,j,b]);let k=5*v,C=k-5,_=t.slice(C,k),z=Math.ceil(t.length/5),R=e=>{w(e)},Z=e=>{let s=o.qL.find(s=>s.id===e);return s?s.name:e};return(0,a.jsxs)("main",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)(l.Navbar,{}),(0,a.jsx)(n.StarsBackground,{}),(0,a.jsxs)("div",{className:"flex-1 container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-center mb-2",children:"История гаданий"}),(0,a.jsx)("p",{className:"text-muted-foreground text-center mb-8",children:"Просмотрите историю ваших предыдущих раскладов"}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(d.I,{placeholder:"Поиск по вопросу или картам...",value:j,onChange:e=>N(e.target.value),className:"pl-10"})]}),(0,a.jsx)("div",{className:"w-full sm:w-48",children:(0,a.jsxs)(c.Ph,{value:b,onValueChange:y,children:[(0,a.jsx)(c.i4,{children:(0,a.jsx)(c.ki,{placeholder:"Тип расклада"})}),(0,a.jsxs)(c.Bw,{children:[(0,a.jsx)(c.Ql,{value:"all",children:"Все расклады"}),o.qL.map(e=>(0,a.jsx)(c.Ql,{value:e.id,children:e.name},e.id))]})]})})]}),_.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[_.map((e,s)=>(0,a.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4 hover:border-secondary/50 transition-all",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-secondary",children:Z(e.spreadType)}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground mt-1 sm:mt-0",children:[(0,a.jsx)(x,{className:"h-4 w-4 mr-1"}),(0,m.p6)(e.date)]})]}),e.question&&(0,a.jsxs)("p",{className:"text-sm mb-3 line-clamp-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Вопрос:"})," ",e.question]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.cards.slice(0,3).map((e,s)=>(0,a.jsx)("div",{className:"bg-primary/10 text-xs px-2 py-1 rounded-full",children:e.card.nameRu},s)),e.cards.length>3&&(0,a.jsxs)("div",{className:"bg-primary/10 text-xs px-2 py-1 rounded-full",children:["+",e.cards.length-3]})]}),(0,a.jsx)(g(),{href:"/reading/".concat(e.id),children:(0,a.jsx)(i.z,{variant:"outline",size:"sm",children:"Просмотреть полностью"})})]},e.id||s)),z>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center mt-6 space-x-2",children:[(0,a.jsx)(i.z,{variant:"outline",size:"icon",onClick:()=>R(Math.max(1,v-1)),disabled:1===v,children:(0,a.jsx)(h,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"text-sm",children:["Страница ",v," из ",z]}),(0,a.jsx)(i.z,{variant:"outline",size:"icon",onClick:()=>R(Math.min(z,v+1)),disabled:v===z,children:(0,a.jsx)(p,{className:"h-4 w-4"})})]})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDD2E"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"История пуста"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"У вас пока нет сохраненных гаданий или они не соответствуют фильтрам"}),(0,a.jsx)(g(),{href:"/reading",children:(0,a.jsx)(i.z,{className:"bg-secondary text-secondary-foreground hover:bg-secondary/90",children:"Начать гадание"})})]})]})]})]})}},1908:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var a=t(7437),r=t(2265),l=t(9311);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});n.displayName="Input"},8094:function(e,s,t){"use strict";t.d(s,{Bw:function(){return h},Ph:function(){return o},Ql:function(){return j},i4:function(){return u},ki:function(){return m}});var a=t(7437),r=t(2265),l=t(6588),n=t(3523),i=t(9224),d=t(2442),c=t(9311);let o=l.fC;l.ZA;let m=l.B4,u=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(l.xz,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 select-trigger",t),...i,children:[r,(0,a.jsx)(l.JO,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.xz.displayName;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=l.u_.displayName;let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=l.$G.displayName;let h=r.forwardRef((e,s)=>{let{className:t,children:r,position:n="popper",...i}=e;return(0,a.jsx)(l.h_,{children:(0,a.jsxs)(l.VY,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,a.jsx)(f,{}),(0,a.jsx)(l.l_,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(x,{})]})})});h.displayName=l.VY.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})});p.displayName=l.__.displayName;let j=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(l.ck,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.wU,{children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(l.eT,{children:r})]})});j.displayName=l.ck.displayName;let g=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...r})});g.displayName=l.Z0.displayName}},function(e){e.O(0,[395,284,863,282,971,864,744],function(){return e(e.s=9552)}),_N_E=e.O()}]);